<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSI - Contabilidad</title>
    <link rel="stylesheet" href="contabilidad.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <header class="header-transparent">
        <div class="menu container">
            <a href="index.html" class="logo"><img src="img/logoBlanco.png" alt="DSISAC Logo"></a>
            <input type="checkbox" id="menu">
            <label for="menu" class="menu-label">
                <img src="img/menu.png" class="menu-icono" alt="men√∫">
            </label>
            <nav class="navbar">
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                    <li class="dropdown-item">
                        <a href="servicios.html" class="dropdown-trigger active-link">Soluciones <i class="fas fa-chevron-down"></i></a>
                        <div class="mega-menu">
                            <div class="menu-tabs">
                                <span class="tab-link active" onclick="switchMenuTab(event, 'tab-productos')">PRODUCTOS</span>
                                <span class="tab-link" onclick="switchMenuTab(event, 'tab-servicios')">SERVICIOS</span>
                            </div>
                            <div id="tab-productos" class="menu-content active">
                                <ul>
                                    <li><a href="detalleERP.html">DSINet - ERP Core <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="contabilidad.html">DSI - Contabilidad <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="pedidos.html">DSI - Pedidos <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="gerencial.html">DSI - Gerencial <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="medida.html">Desarrollo de Software a Medida <i class="fas fa-chevron-right"></i></a></li>
                                </ul>
                            </div>
                            <div id="tab-servicios" class="menu-content">
                                <ul>
                                    <li><a href="soporteUsuario.html">Servicio de Soporte <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="certificadosDigitales.html">Certificados Digitales <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="nubefactOse.html">NubeFact - OSE <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="servidorNube.html">Servidor en la Nube (VPS) <i class="fas fa-chevron-right"></i></a></li>
                                    <li><a href="modificacionSistema.html">Modificaci√≥n de Sistema <i class="fas fa-chevron-right"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li><a href="soporte.html">Mesa de Ayuda</a></li>
                </ul>
            </nav>
            <a href="contacto.html" class="btn-header">Contactar &rarr;</a>
        </div>
    </header>

    <section class="accounting-hero-section">
        <div class="container hero-grid">
            <div class="hero-left-content hidden-left">
                <div class="outline-icon-box"><i class="fas fa-calculator"></i></div>
                <h1>DSI - Contabilidad</h1>
                <p class="hero-subtitle">M√≥dulo especializado que transforma la operaci√≥n en informaci√≥n contable confiable.</p>
            </div>
            <div class="hero-right-card hidden-right">
                <div class="card-content">
                    <h2>Problemas que resuelve</h2>
                    <div class="card-point">
                        <div class="point-icon"><i class="far fa-check-circle"></i></div>
                        <p>Elimina la contabilidad paralela en Excel y los errores de conciliaci√≥n.</p>
                    </div>
                    <div class="card-separator"></div>
                    <div class="card-point">
                        <div class="point-icon"><i class="far fa-check-circle"></i></div>
                        <p>Reduce la dependencia del estudio contable externo.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="info-modules-section">
        <div class="container">

            <div class="module-row hidden">
                <div class="module-text">
                    <h3>Caracter√≠sticas</h3>
                    <p>Herramientas potentes para el control total de tu contabilidad.</p>
                    <ul class="module-list">
                        <li><i class="fas fa-check"></i> <span>Integraci√≥n autom√°tica con ventas, compras y almacenes</span></li>
                        <li><i class="fas fa-check"></i> <span>Generaci√≥n de asientos contables</span></li>
                        <li><i class="fas fa-check"></i> <span>Plan contable configurable</span></li>
                        <li><i class="fas fa-check"></i> <span>Libros electr√≥nicos y Reportes tributarios</span></li>
                        <li><i class="fas fa-check"></i> <span>Preparaci√≥n para fiscalizaciones</span></li>
                    </ul>
                </div>
                <div class="module-image">
                    <img src="img/contabilidadHero.png" alt="Contabilidad">
                </div>
            </div>

            <div class="module-row reverse hidden">
                <div class="module-text">
                    <h3>Cliente Objetivo y Modelo</h3>
                    <p>Dise√±ado para empresas en crecimiento que requieren auditor√≠a y orden.</p>
                    <ul class="module-list">
                        <li>
                            <i class="fas fa-user-tie"></i>
                            <span><strong>Cliente objetivo:</strong> Clientes que ya usan DSI-Net y empresas con auditor√≠a o crecimiento.</span>
                        </li>
                        <li>
                            <i class="fas fa-cubes"></i>
                            <span><strong>Modelo:</strong> Add-on mensual.</span>
                        </li>
                        <li>
                            <i class="fas fa-rocket"></i>
                            <span><strong>Implementaci√≥n:</strong> Implementaci√≥n ligera.</span>
                        </li>
                    </ul>
                </div>
                <div class="module-image">
                    <img src="img/clienteContabilidad.png" alt="Cliente Objetivo">
                </div>
            </div>

        </div>
    </section>

    <section class="quote-section">
        <div class="container">
            <div class="quote-content-wrapper hidden">
                <div class="quote-text-form">
                    <h2>Deseo cotizar el m√≥dulo contable</h2>
                    <p>Deje sus datos y un especialista le contactar√° para explicarle la implementaci√≥n ligera.</p>
                    
                    <form id="contactForm" class="quote-form">
                        
                        <input type="hidden" name="_subject" value="Nuevo Lead - DSI Contabilidad">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_captcha" value="false">

                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>Nombres y Apellidos</label>
                                <input type="text" name="Nombre" class="input-white" required>
                            </div>
                            <div class="form-group">
                                <label>Empresa</label>
                                <input type="text" name="Empresa" class="input-white" required>
                            </div>
                        </div>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label>Tel√©fono</label>
                                <input type="tel" name="Telefono" class="input-white" required>
                            </div>
                            <div class="form-group">
                                <label>Correo electr√≥nico</label>
                                <input type="email" name="Email" class="input-white" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Descripci√≥n</label>
                            <textarea name="Mensaje" class="input-white" rows="4"></textarea>
                        </div>
                        <button type="submit" class="btn-quote" id="submitBtn">Cotizar &rarr;</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-top">
                <div class="footer-left">
                    <a href="#" class="footer-logo">
                        <img src="img/logoTextBlanco.png" alt="DSISAC Logo">
                    </a>
                    <p class="footer-desc">Desde la estrategia hasta la ejecuci√≥n, creamos soluciones digitales que impulsan tu negocio</p>
                    <ul class="footer-nav">
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="nosotros.html">Nosotros</a></li>
                        <li><a href="servicios.html">Productos</a></li>
                        <li><a href="soporte.html">Mesa de Ayuda</a></li>
                    </ul>
                </div>
                <div class="footer-right">
                    <h3>Suscr√≠bete a nuestro bolet√≠n</h3>
                    <p>Las √∫ltimas noticias, art√≠culos y recursos, enviados a su bandeja de entrada semanalmente</p>
                    <form class="subscribe-form">
                        <input type="email" placeholder="Introduce tu correo electr√≥nico" required>
                        <button type="submit">Suscribirse</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright 2026 ¬© DSISAC</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <div id="formModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon"></div>
            <h3 id="modalTitle">T√≠tulo</h3>
            <p id="modalMessage">Mensaje del modal</p>
            <button class="modal-btn" onclick="closeModal()">Aceptar</button>
        </div>
    </div>

    <div class="chat-widget">
        <button id="chat-toggle" class="chat-toggle">
            <i class="fas fa-comment-dots"></i>
            <span class="chat-badge">1</span>
        </button>

        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <div class="header-info">
                    <img src="img/ISOTIPO.png" alt="Bot" onerror="this.src='https://cdn-icons-png.flaticon.com/512/4712/4712035.png'">
                    <div>
                        <h4>Asistente DSI</h4>
                        <span class="status">‚óè En l√≠nea</span>
                    </div>
                </div>
                <button id="chat-close" class="chat-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="chat-body" id="chat-body"></div>
            <div class="chat-footer">
                <form id="chat-form" autocomplete="off">
                    <input type="text" id="chat-input" placeholder="Escribe tu consulta..." required>
                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>
    </div>

    <script>
        /* --- 1. L√ìGICA VISUAL Y FORMULARIO --- */
        function switchMenuTab(evt, tabId) {
            evt.preventDefault(); evt.stopPropagation();
            let tabs = document.querySelectorAll('.tab-link');
            let contents = document.querySelectorAll('.menu-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            evt.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        /* --- LOGICA FORMULARIO AJAX --- */
        const form = document.getElementById('contactForm');
        const modal = document.getElementById('formModal');
        const modalIcon = document.getElementById('modalIcon');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (!form.checkValidity()) {
                showModal('error', 'Error al enviar', 'Por favor, complete todos los campos requeridos.');
                return;
            }
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = 'Enviando... <i class="fas fa-spinner fa-spin"></i>';
            submitBtn.disabled = true;
            const formData = new FormData(form);

            fetch("https://formsubmit.co/ajax/ventas@dsi-sac.com", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                showModal('success', '¬°Mensaje Enviado!', 'Gracias por cotizar. Nos pondremos en contacto pronto.');
                form.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                showModal('error', 'Error de conexi√≥n', 'Hubo un problema al enviar el mensaje. Int√©ntelo de nuevo.');
            })
            .finally(() => {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            });
        });

        function showModal(type, title, message) {
            modal.style.display = 'flex';
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            if (type === 'success') {
                modalIcon.innerHTML = '<i class="fas fa-check-circle" style="color: #28a745;"></i>';
            } else {
                modalIcon.innerHTML = '<i class="fas fa-times-circle" style="color: #dc3545;"></i>';
            }
            setTimeout(() => { document.querySelector('.modal-content').classList.add('active'); }, 10);
        }

        function closeModal() {
            document.querySelector('.modal-content').classList.remove('active');
            setTimeout(() => { modal.style.display = 'none'; }, 300);
        }

        window.onclick = function(event) {
            if (event.target == modal) closeModal();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('show');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            const hiddenElements = document.querySelectorAll('.hidden, .hidden-left, .hidden-right');
            hiddenElements.forEach((el) => observer.observe(el));
        });

        /* --- 2. CHATBOT DE VENTAS --- */
        document.addEventListener('DOMContentLoaded', () => {
            const chatToggle = document.getElementById('chat-toggle');
            const chatWindow = document.getElementById('chat-window');
            const chatClose = document.getElementById('chat-close');
            const chatBody = document.getElementById('chat-body');
            const chatBadge = document.querySelector('.chat-badge');
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            let isChatOpen = false;
            let hasStarted = false;

            const knowledgeBase = [
                { 
                    keywords: ["soporte", "ayuda", "ticket", "falla", "error", "tecnico", "no funciona", "problema"], 
                    response: "‚ö†Ô∏è Para soporte t√©cnico, por favor ingresa a nuestra Mesa de Ayuda.", 
                    linkText: "üî¥ Ir a Mesa de Ayuda", linkUrl: "soporte.html" 
                },
                {
                    keywords: ["demo", "demostracion", "prueba", "ver", "ense√±ame"],
                    response: "¬°Excelente! üöÄ La mejor forma de convencerte es viendo el sistema. ¬øTe agendo una demo gratuita?",
                    linkText: "üìÖ Agendar Demo por WhatsApp", action: "whatsapp_demo"
                },
                {
                    keywords: ["precio", "costo", "cotizar", "presupuesto", "tarifa"],
                    response: "Manejamos planes flexibles. üí∞ ¬øDeseas una cotizaci√≥n formal?",
                    linkText: "Solicitar Cotizaci√≥n", action: "whatsapp_cotizacion"
                },
                {
                    keywords: ["comprar", "contratar", "adquirir", "quiero", "interesado"],
                    response: "¬°Perfecto! üéâ Un asesor comercial priorizar√° tu atenci√≥n.",
                    linkText: "üöÄ Hablar con Ventas", action: "whatsapp_venta"
                },
                {
                    keywords: ["contabilidad", "contable", "libros", "asientos"], 
                    response: "El m√≥dulo Contable automatiza tus asientos y libros electr√≥nicos. ¬øTe gustar√≠a implementarlo?",
                    options: true
                },
                { 
                    keywords: ["hola", "buenos", "buenas", "inicio", "saludos"], 
                    response: "¬°Hola! üëã Soy tu Asesor Comercial. ¬øBuscas el m√≥dulo Contable, una Demo o Soporte?", 
                    options: true 
                },
                {
                    keywords: ["sector", "rubro", "empresa"], 
                    response: "Tenemos soluciones para diversos sectores. Puedes verlos en el inicio.",
                    linkText: "Ver Sectores", linkUrl: "index.html"
                }
            ];

            chatToggle.addEventListener('click', () => {
                isChatOpen = !isChatOpen;
                chatWindow.classList.toggle('active', isChatOpen);
                if (isChatOpen) {
                    chatBadge.style.display = 'none';
                    if (!hasStarted) { startConversation(); hasStarted = true; }
                    setTimeout(() => chatInput.focus(), 300);
                }
            });

            chatClose.addEventListener('click', () => {
                isChatOpen = false;
                chatWindow.classList.remove('active');
            });

            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const text = chatInput.value.trim();
                if (text) {
                    addMessage(text, 'user');
                    processUserInput(text);
                    chatInput.value = '';
                }
            });

            function addMessage(text, sender) {
                const div = document.createElement('div');
                div.classList.add('message', sender === 'bot' ? 'bot-msg' : 'user-msg');
                div.innerHTML = text;
                chatBody.appendChild(div);
                chatBody.scrollTop = chatBody.scrollHeight;
            }

            function addOptionsBtn(text, url, action, modalId) {
                const div = document.createElement('div');
                div.classList.add('options-container');
                const btn = document.createElement('button');
                btn.classList.add('chat-btn');
                btn.innerText = text;
                
                if (action === 'openModal') btn.onclick = () => window.location.href = "index.html"; // Redirige a index para modales
                else if (action === 'whatsapp') btn.onclick = () => window.open("https://wa.me/51940769186", "_blank");
                else if (action === 'whatsapp_demo') btn.onclick = () => window.open("https://wa.me/51940769186?text=Hola,%20quisiera%20agendar%20una%20Demo%20de%20Contabilidad.", "_blank");
                else if (action === 'whatsapp_cotizacion') btn.onclick = () => window.open("https://wa.me/51940769186?text=Hola,%20deseo%20cotizar%20el%20m%C3%B3dulo%20contable.", "_blank");
                else if (action === 'whatsapp_venta') btn.onclick = () => window.open("https://wa.me/51940769186?text=Hola,%20estoy%20interesado%20en%20contratar.", "_blank");
                else btn.onclick = () => window.location.href = url;
                
                div.appendChild(btn);
                chatBody.appendChild(div);
                chatBody.scrollTop = chatBody.scrollHeight;
            }

            function showMainMenu() {
                const div = document.createElement('div');
                div.classList.add('options-container');
                const options = [
                    { text: "üìä M√≥dulo Contable", action: "whatsapp_venta" },
                    { text: "üíª Ver Software ERP", url: "detalleERP.html" },
                    { text: "üìÖ Solicitar Demo", action: "whatsapp_demo" },
                    { text: "üôã‚Äç‚ôÇÔ∏è Hablar con Asesor", action: "whatsapp" }
                ];
                options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.classList.add('chat-btn');
                    btn.innerText = opt.text;
                    
                    if(opt.action === 'whatsapp') btn.onclick = () => window.open("https://wa.me/51940769186", "_blank");
                    else if(opt.action === 'whatsapp_demo') btn.onclick = () => window.open("https://wa.me/51940769186?text=Hola,%20quisiera%20agendar%20una%20Demo.", "_blank");
                    else if(opt.action === 'whatsapp_venta') btn.onclick = () => window.open("https://wa.me/51940769186?text=Hola,%20estoy%20interesado%20en%20contratar.", "_blank");
                    else btn.onclick = () => window.location.href = opt.url;
                    
                    div.appendChild(btn);
                });
                chatBody.appendChild(div);
                chatBody.scrollTop = chatBody.scrollHeight;
            }

            function processUserInput(text) {
                const cleanText = text.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[?¬ø!¬°,.]/g, ""); 
                let matchFound = false;

                setTimeout(() => {
                    for (const item of knowledgeBase) {
                        if (item.keywords.some(keyword => cleanText.includes(keyword))) {
                            addMessage(item.response, 'bot');
                            if (item.linkText && (item.linkUrl || item.modalId || item.action)) { 
                                addOptionsBtn(item.linkText, item.linkUrl, item.action, item.modalId); 
                            }
                            if (item.options) { showMainMenu(); }
                            matchFound = true;
                            break; 
                        }
                    }
                    if (!matchFound) {
                        addMessage("ü§î No estoy seguro. ¬øTe interesa una Demo, Contabilidad o Soporte?", 'bot');
                        showMainMenu();
                    }
                }, 600);
            }

            function startConversation() {
                addMessage("¬°Hola! üëã Soy tu Asesor Comercial de <strong>DSISAC</strong>.", 'bot');
                setTimeout(() => {
                    addMessage("¬øEn qu√© puedo ayudarte? Escribe (ej: 'quiero contabilidad', 'cotizar') o elige una opci√≥n:", 'bot');
                    showMainMenu();
                }, 600);
            }
        });
    </script>
</body>
</html>